#!/usr/bin/env python

from optparse import OptionParser

import rivet, yoda, sys, os

parser = OptionParser(usage=__doc__)
parser.add_option('-t', '--tags', dest='TAGS', action='store',
                  help=('give two elements of file name to be matched, '
                  'separated by a space'),
                  default=('mP','mY'), nargs=2)

opts, dummy = parser.parse_args()

for root, dirs, files in os.walk('.'):
    filelist = []
    for name in files:
        if name.endswith('.yoda') and name != 'LHC.yoda':
            yodafile = os.path.join(root, name)
            filelist.append(yodafile)

    if filelist != []:
        file_string = ' '.join(filelist)
        out_file = root + os.sep + 'runpoint_' + os.path.split(root)[1] + '.yoda'
        command = ' '.join(['yodamerge -o', out_file, file_string])
        print(command)
        print('-'*len(command) + '\n')
        os.system(command)
