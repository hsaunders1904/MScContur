#!/usr/bin/env python

import CL
import sys
from optparse import OptionParser

parser = OptionParser(usage = __doc__)
parser.add_option("-o", "--outputdir", dest = "OUTPUTDIR",
  default = "plots", help = "Specify output directory for output plots.")
parser.add_option("-a", "--analysisdir", dest = "ANALYSISDIR",
  default = "ANALYSIS", help = "Output directory for analysis cards.")

# Command line parsing
opts, yodafiles = parser.parse_args()

if not yodafiles:
    sys.stderr.write("Error: You need to specify some YODA files to be plotted!\n")
    sys.exit(1)

for infile in yodafiles: 
    mapPoints = CL.contur_analysis(infile, opts) # Performing the analysis
    CL.output_single(mapPoints, opts)  # Outputing the results

print "Run finished, analysis output to ", opts.ANALYSISDIR, " folder"
